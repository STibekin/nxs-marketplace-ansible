# Default server configuration
#
server {
	listen 80 default_server;
	listen [::]:80 default_server;
{% if nginx_site_default_ssl %}
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
{% elif not (ansible_os_family == 'Debian' and ansible_distribution_release == 'wheezy') %}
	# listen 443 ssl default_server;
	# listen [::]:443 ssl default_server;
{% endif %}
	server_name _;

{% if nginx_site_default_ssl %}
	ssl_certificate /etc/nginx/ssl/default.crt;
	ssl_certificate_key /etc/nginx/ssl/default.key;

{% endif %}
{% if not (ansible_os_family == 'Debian' and ansible_distribution_release == 'wheezy') %}
	# Self signed certs generated by the ssl-cert package
	# Don't use them in a production server!
	#
	# include snippets/snakeoil.conf;

{% endif %}
	root /usr/share/nginx/html;
	index index.html;

	location / {
{% if nginx_site_default_type == 'error404' %}
		return 404;
{% else %}
		try_files $uri $uri/ =404;
{% endif %}
	}
}
